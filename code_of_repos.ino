#include "arduino_secrets.h"

const int buttonPin = 2; // ÐÐ¸Ð½ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸
const int segments[] = {3, 4, 5, 6, 8, 9, 10}; // ÐÐ¸Ð½Ñ Ð´Ð»Ñ ÑÐµÐ³Ð¼ÐµÐ½ÑÐ¾Ð² Ð´Ð¸ÑÐ¿Ð»ÐµÑ (a, b, c, d, e, f, g)
const int segmentCount = 7;

// Ð¢Ð°Ð±Ð»Ð¸ÑÐ° ÑÐµÐ³Ð¼ÐµÐ½ÑÐ¾Ð² Ð´Ð»Ñ ÑÐ¸ÑÑ 0-9 (a-g, HIGH Ð²ÐºÐ»ÑÑÐ°ÐµÑ ÑÐµÐ³Ð¼ÐµÐ½Ñ)
const bool digits[10][7] = {
  {1, 1, 1, 1, 1, 1, 0}, // 0
  {0, 1, 1, 0, 0, 0, 0}, // 1
  {1, 1, 0, 1, 1, 0, 1}, // 2
  {1, 1, 1, 1, 0, 0, 1}, // 3
  {0, 1, 1, 0, 0, 1, 1}, // 4
  {1, 0, 1, 1, 0, 1, 1}, // 5
  {1, 0, 1, 1, 1, 1, 1}, // 6
  {1, 1, 1, 0, 0, 0, 0}, // 7
  {1, 1, 1, 1, 1, 1, 1}, // 8
  {1, 1, 1, 1, 0, 1, 1}  // 9
};

int currentDigit = 0; // Ð¢ÐµÐºÑÑÐ°Ñ ÑÐ¸ÑÑÐ°
bool buttonState = HIGH; // Ð¢ÐµÐºÑÑÐµÐµ ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸
bool lastButtonState = HIGH; // ÐÑÐµÐ´ÑÐ´ÑÑÐµÐµ ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸

void setup() {
  pinMode(buttonPin, INPUT_PULLUP); // ÐÐ½Ð¾Ð¿ÐºÐ° Ñ Ð¿Ð¾Ð´ÑÑÐ¶ÐºÐ¾Ð¹ Ðº Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ
  for (int i = 0; i < segmentCount; i++) {
    pinMode(segments[i], OUTPUT); // ÐÐ°ÑÑÑÐ°Ð¸Ð²Ð°ÐµÐ¼ Ð²ÑÐµ ÑÐµÐ³Ð¼ÐµÐ½ÑÑ ÐºÐ°Ðº Ð²ÑÑÐ¾Ð´Ñ
    digitalWrite(segments[i], LOW); // ÐÑÐµ ÑÐµÐ³Ð¼ÐµÐ½ÑÑ Ð²ÑÐºÐ»ÑÑÐµÐ½Ñ
  }
}

void loop() {
  buttonState = digitalRead(buttonPin); // Ð¡ÑÐ¸ÑÑÐ²Ð°ÐµÐ¼ ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸

  // ÐÑÐ»Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°Ð¶Ð°ÑÐ° (Ð¿ÐµÑÐµÑÐ¾Ð´ Ð¸Ð· HIGH Ð² LOW)
  if (buttonState == LOW && lastButtonState == HIGH) {
    currentDigit = (currentDigit + 1) % 10; // Ð£Ð²ÐµÐ»Ð¸ÑÐ¸Ð²Ð°ÐµÐ¼ ÑÐ¸ÑÑÑ, Ð¿ÐµÑÐµÑÐ¾Ð´Ð¸Ð¼ Ð½Ð° 0 Ð¿Ð¾ÑÐ»Ðµ 9
    displayDigit(currentDigit); // ÐÑÐ¾Ð±ÑÐ°Ð¶Ð°ÐµÐ¼ ÑÐ¸ÑÑÑ
    delay(200); // ÐÐ°Ð´ÐµÑÐ¶ÐºÐ° Ð´Ð»Ñ Ð·Ð°ÑÐ¸ÑÑ Ð¾Ñ Ð´ÑÐµÐ±ÐµÐ·Ð³Ð°
  }

  lastButtonState = buttonState; // Ð¡Ð¾ÑÑÐ°Ð½ÑÐµÐ¼ ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸
}

// Ð¤ÑÐ½ÐºÑÐ¸Ñ Ð´Ð»Ñ Ð¾ÑÐ¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ñ ÑÐ¸ÑÑÑ Ð½Ð° Ð´Ð¸ÑÐ¿Ð»ÐµÐµ
void displayDigit(int digit) {
  for (int i = 0; i < segmentCount; i++) {
    digitalWrite(segments[i], digits[digit][i]); // Ð£ÑÑÐ°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ðµ ÑÐµÐ³Ð¼ÐµÐ½ÑÐ°
  }
}
